
gcloud beta compute networks peerings create hub-to-spoke2 \
  --network hub-vpc \
  --peer-network spoke2-vpc \
  --peer-project orange-project-c3 \
  --import-custom-routes \
  --export-custom-routes

gcloud beta compute networks peerings create spoke2-to-hub \
  --network spoke2-vpc \
  --peer-network hub-vpc \
  --peer-project orange-project-c3 \
  --import-custom-routes \
  --export-custom-routes



curl -i -X POST \
  -H "Authorization: Bearer $(gcloud auth print-access-token)" \
  -H "Content-Type: application/json" \
  -d ' \
  {
    "source": {
      "ipAddress": "10.10.1.2",
      "network": "projects/myproject/global/networks/hub-vpc",
      "projectId": "orange-project-c3"
    },
    "destination": {
      "ipAddress": "10.1.1.2",
      "port": 80,
      "projectId": "orange-project-c3"
    },
    "protocol": "TCP"
  }' \
  https://reachability.googleapis.com/v1alpha1/projects/orange-project-c3/locations/global/tests?testId=mytest-1

curl -i -X POST -H "Authorization: Bearer $(gcloud auth print-access-token)" -H "Content-Type: application/json" https://reachability.googleapis.com/v1alpha1/projects/orange-project-c3/locations/global/tests?testId=mytest-1 \
-d '{}'
